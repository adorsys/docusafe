In dieser Struktur hat der Benutzer <userID1> für den Benutzer <userID2> den Bucket
Bucket1/Bucket1_1 und Bucket1/Bucket1_1/Bucket1_1_1 mit Schreibberechtung freigegeben. D.h. alle Documente in diesem Bucket können
von Benutzer2 gelesen und geschrieben oder gelöscht werden.
Das Verzeichnis Bucket1/Bucket1_2 ist nur mit Leseberechtigung für UserID2 freigegeben.

cloud/<userID1>/Bucket1/DocumentID1
                       /DocumentID2
                       /Bucket1_1/Bucket1_1_1/DocumentID1
                                             /DocumentID2
                       /Bucket1_1/Bucket1_1_2/DocumentID1
                                             /DocumentID2
                                 /DocumentID1
                                 /DocumentID2
                                 /DocumentID3
                       /Bucket1_2/DocumentID1
                                 /DocumentID2
                                 /DocumentID3
               /Bucket2/DocumentID1
               /Bucket3/DocumentID1
                       /DocumentID2
                       /DocumentID3
               /DocumentID1
               /DocumentID2

              /KeyStoreBucket/<userID1>.keyStore
                             /BucketGuard.W.<UserID1>
                             /BucketGuard.W.<UserID1>/Bucket1
                             /BucketGuard.W.<UserID1>/Bucket1/Bucket1_1
                             /BucketGuard.W.<UserID1>/Bucket1/Bucket1_1/Bucket1_1_1
                             /BucketGuard.W.<UserID1>/Bucket1/Bucket1_1/Bucket1_1_2
                             /BucketGuard.W.<UserID1>/Bucket1/Bucket1_2
                             /BucketGuard.W.<UserID1>/Bucket2
                             /BucketGuard.W.<UserID1>/Bucket3
              /Grants/<userID2>/BucketGuard.W.<UserID1>/Bucket1/Bucket1_1
                      <userID2>/BucketGuard.W.<UserID1>/Bucket1/Bucket1_1/Bucket1_1_1
                      <userID2>/BucketGuard.R.<UserID1>/Bucket1/Bucket1_2


     /<userID2>/DocumentID1
              /KeyStoreBucket/<userID2>.keyStore
                             /BucketGuard.W.<UserID2>
                             /BucketGuard.W.<UserID1>/Bucket1/Bucket1_1
                             /BucketGuard.W.<UserID1>/Bucket1/Bucket1_1/Bucket1_1_1
                             /BucketGuard.R.<UserID1>/Bucket1/Bucket1_2

Für den Benutzer userID2 stellt sich seine Ansicht von Document aber nun wie folgt dar:

DocumentID1
<userID1>/Bucket1/Bucket1_1/Bucket1_1_1/DocumentID1
                                       /DocumentID2
                           /DocumentID1
                           /DocumentID2
                           /DocumentID3
          Bucket1/Bucket1_2/DocumentID1
                           /DocumentID2
                           /DocumentID3

Unterhalb der Verzeichnisse KeyStoreBucket und Grants gibt es keine Unterverzeichnisse.
Die Namen der Dateien enhalten die Pfade nur der Deutlichkeit halber. Die / müssen durch
Separatoren ersetzt werden.
Eine DoucmentLocation besteht nach wie vor aus dem DocumentBucketName und der DocumentID.
Der DocumentBucketName ist aber nicht auf eine Ebene beschränkt sondern enthält einen Pfad.

LINKS:

Damit <userID1> das Document <userID1>/<Bucket3>/DocumentID3 für den Benuzter UserID2 freigeben kann,
ohne dabei Zugriff auf den gesamten Bucket3 zu gewähren, kann Benutzer 1 einen neuen Bucket
anlegen:

cloud/<userID>/Bucket4

Dieser ist wieder mit einem eigenen BucketGuard verschlüsselt. Um nun das Document3 aus Bucket3 dort zu
verlinken, werden zwei Dateien erzeugt:

cloud/<userID>/Bucket4/DocumentID3.link
cloud/<userID>/Bucket4/DocumentID3.link.guard

DocumentID3.link ist unverschlüsselt und zeigt auf die DocumentLocation cloud/<userID1>/<Bucket3>/DocumentID3
DocumentID3.link.guard ist technisch gesehen, wie ein normales Document mit dem DocumenetKey des BucketGuards verschlüsselt.
Der Inhalt dieser Datei ist aber die DocumentKeyID und der DocumentKey des Buckets, in dem die originale Datei liegt. Dieser
Inhalt darf also nie nach aussen gegeben werden! Stattdessen wird er benutzt, um das eigentliche Document lesen oder
Schreiben zu können.

Ist obliegt naütlich dem ServiceLayer, diese Dateien nie nach aussen zu geben. Ausserdem dürfen diese Dateien
ausschließlich vom User <userID> erzeugt oder geändert werden. Gelesen werden natürlich von allen, die Zugriff auf
<bucket4> haben.

